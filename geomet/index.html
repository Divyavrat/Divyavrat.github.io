<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Geomet</title>
        <link rel="stylesheet" href="css/bootstrap.min.css"/>
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    </head>
<body background="banner.jpg">
<script src="lib/jquery.min.js"></script>
<script src="lib/bootstrap.min.js"></script>
<script>
function goBack() {
    window.history.back();
}
</script>
<div class="section">
<div class="container">
<div class="page-header">
	<h1>
		<small>GEOMEt - learn geometry in an easy 3D</small>
	</h1>
</div>

<!-- menu of all shapes -->
<div class="row">
	<div class="col-md-12">
		<ul class="lead nav nav-justified nav-pills" id="shapelist">
			<li>
				<a href="#" onclick="showshape(1);">Square</a>
			</li>
			<li>
				<a href="#" onclick="showshape(2);">Rectangle</a>
			</li>
			<li>
				<a href="#" onclick="showshape(3);">Circle</a>
			</li>
			<li>
				<a href="#" onclick="showshape(4);">Triangle</a>
			</li>
			<li>
				<a href="#" onclick="showshape(5);">Cuboid</a>
			</li>
			<li>
				<a href="#" onclick="showshape(6);">Cube</a>
			</li>
			<li>
				<a href="#" onclick="showshape(7);">Sphere</a>
			</li>
			<li>
				<a href="#" onclick="showshape(8);">Cone</a>
			</li>
			<li>
				<a href="#" onclick="showshape(9);">Cylinder</a>
			</li>
			<li>
				<a href="#" onclick="showshape(10);">Point</a>
			</li>
			<li>
				<a href="#" onclick="showshape(11);">Line</a>
			</li>
			<li>
				<a href="#" onclick="showshape(12);">Curve</a>
			</li>
		</ul>
	</div>
</div>
</div>
</div>

<!-- Information -->
<div class="section">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="alert alert-dismissable alert-info">
					<strong>Control : </strong>Twist and Turn and Rotate the shapes to check out their geometry.</div>
			</div>
		</div>
	</div>
</div>

<style>
.response{
width:300px;
height:300px;
}
</style>
<script src="lib/three.min.js"></script>
<script src="lib/OrbitControls.js"></script>
<div class="section">
<div class="row-fluid">
<div class="span12" id="main">
</div>
</div>
</div>
<script>
var shape;
var list = document.getElementById("shapelist");
var scene, camera, renderer;
var mesh,meshtext;
var controls;
var speed=100;
var geometry, material;

//Initial shape
showshape(6);
animate();

//Main Function to show different shapes
function showshape(newshape){

// Remove if shape already exists
if(shape){
document.body.removeChild( renderer.domElement );
list.getElementsByTagName("li")[shape-1].className = '';
}
shape=newshape;
switch(shape)
{
	case(1):
	// Square
	geometry = new THREE.BoxGeometry( 200, 200, 0 );
	break;
	
	case(2):
	// Rectangle
	geometry = new THREE.BoxGeometry( 100, 200, 0 );
	break;
	
	case(3):
	// Circle
	geometry = new THREE.CircleGeometry( 100, 20 );
	break;
	
	case(4):
	// Triangle
	geometry = new THREE.Geometry();
	var v1 = new THREE.Vector3(0,0,0);
	var v2 = new THREE.Vector3(100,100,0);
	var v3 = new THREE.Vector3(-100,100,0);

	geometry.vertices.push( v1 );
	geometry.vertices.push( v2 );
	geometry.vertices.push( v3 );

	geometry.faces.push( new THREE.Face3( 0, 1, 2 ) );
	geometry.computeFaceNormals();
	break;

	case(5):
	// Cuboid
	geometry = new THREE.BoxGeometry( 100, 200, 100 );
	break;
	
	case(6):
	// Cube
	geometry = new THREE.BoxGeometry( 150, 150, 150 );
	break;
	
	case(7):
	// set up the sphere vars
	var radius = 100,
    segments = 26,
    rings = 26;
	// create a new mesh with
	// sphere geometry
	geometry = new THREE.SphereGeometry(radius,segments,rings);
	break;
	
	case(8):
	// Cone
	geometry = new THREE.CylinderGeometry( 0, 100, 250, 50,false );
	break;
	
	case(9):
	// Cylinder
	geometry = new THREE.CylinderGeometry( 80, 80, 150, 50,false );
	break;
	
	//Point
	case(10):
	geometry = new THREE.BoxGeometry( 1, 1, 0 );
	material = new THREE.MeshBasicMaterial( { color: 0xFFFFFF, wireframe: true } );
	break;
	
	//Line
	case(11):
	geometry = new THREE.Geometry();
	geometry.vertices.push(
		new THREE.Vector3( -100, 0, 0 ),
		new THREE.Vector3( 100, 40, 0 )
	);
	material = new THREE.LineBasicMaterial({
		color: 0xec5e00
	});
	break;
	
	//Curve
	case(12):
	var curve = new THREE.CubicBezierCurve3(
	new THREE.Vector3( -100, 0, 0 ),
	new THREE.Vector3( -50, 150, 0 ),
	new THREE.Vector3( 200, 150, 0 ),
	new THREE.Vector3( 100, 0, 0 )
	);

	geometry = new THREE.Geometry();
	geometry.vertices = curve.getPoints( 50 );
	material = new THREE.LineBasicMaterial( { color : 0xffffff } );
	break;
	
	default:
	geometry = new THREE.BoxGeometry( 100, 100, 100 );
	material = new THREE.MeshPhongMaterial( { color: 0xD00000, wireframe: false } );
	break;
}

// Create mesh
if(shape==4)mesh= new THREE.Mesh( geometry, new THREE.MeshNormalMaterial() );
else if(shape==10){mesh = new THREE.Mesh( geometry, material );}
else if(shape==11||shape==12){mesh = new THREE.Line( geometry, material );}
else{mesh = new THREE.Mesh( geometry, new THREE.MeshNormalMaterial() );}

// Rotate mesh
if(shape==5||shape==6){mesh.rotation.x=50;mesh.rotation.y=-50;}
if(shape==8||shape==9){mesh.rotation.x=-150;mesh.rotation.y=+50;}

	// draw label text on canvas

	// create a canvas element
	var canvas1 = document.createElement('canvas');
	var context1 = canvas1.getContext('2d');
	context1.font = "Bold 40px Arial";
	context1.fillStyle = "rgba(255,255,255,0.95)";
	// Get label from button text
    context1.fillText(list.getElementsByTagName("a")[shape-1].innerHTML, 100, 50);
    
	// canvas contents will be used for a texture
	var texture1 = new THREE.Texture(canvas1) 
	texture1.needsUpdate = true;
      
    var material1 = new THREE.MeshBasicMaterial( {map: texture1, side:THREE.DoubleSide } );
    material1.transparent = true;

    meshtext = new THREE.Mesh(
    new THREE.PlaneGeometry(canvas1.width, canvas1.height),material1);
	meshtext.position.x = -200;

// Add active class to highlight current button
list.getElementsByTagName("li")[shape-1].className = 'active';

// Recreate scene
init();
}
    
    function init() {

		//Scene
        scene = new THREE.Scene();

		//Camera
        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
        camera.position.z = 500;
		camera.lookAt(mesh.position);
		
		// create point lights
		var pointLight1 = new THREE.PointLight(0xF0FFFF);
		var pointLight2 = new THREE.PointLight(0xFFFFF0);
		var pointLight3 = new THREE.PointLight(0xFFFFFF);
		var pointLight4 = new THREE.PointLight(0xFFFFFF);

		// set light position
		pointLight1.position.x = 100;
		pointLight1.position.y = 0;
		pointLight1.position.z = 300;
		pointLight2.position.x = -100;
		pointLight2.position.y = -300;
		pointLight2.position.z = 200;
		pointLight3.position.x = 100;
		pointLight3.position.y = 300;
		pointLight3.position.z = 200;
		pointLight4.position.x = 100;
		pointLight4.position.y = 300;
		pointLight4.position.z = 0;

		// add lights the scene
		scene.add(pointLight1);
		scene.add(pointLight2);
		
		// Add objects
		scene.add( mesh );scene.add( meshtext );
		
		mesh.position.x = 100;
		mesh.position.z = 100;
		
		renderer = new THREE.WebGLRenderer();
        renderer.setSize( 9*window.innerWidth/10, 8*window.innerHeight/10 );

        // CONTROLS
		controls = new THREE.OrbitControls( camera, renderer.domElement );
		
		document.body.appendChild( renderer.domElement );

    }

    function animate() {

        requestAnimationFrame( animate );

		//Rotate Player
        //mesh.rotation.x += 0.01;
        //mesh.rotation.y += 0.02;
        
		renderer.render( scene, camera );
		
		//if ( keyboard.pressed("z") ) 
	//{}
		controls.update();
    }
</script>
<script>
	//document.getElementById("main").onkeydown=function(){control();};
	document.getElementById("main").addEventListener("keydown", control);
	//document.getElementById("main").addEventListener("onclick", getfar);
	//document.getElementById("main").addEventListener("onmousemove", lookatit);
	
	if(renderer.domElement) {
    renderer.domElement.className += renderer.domElement.className ? ' response' : 'response';
	}
	
	function control(event) {
	if(event.key=="ArrowUp")
	{mesh.rotation.z -= speed;}
	if(event.key=="ArrowDown")
	{mesh.rotation.z += speed;}
	if(event.key=="ArrowLeft"||event.key=="A"||event.key=="a")
	{mesh.rotation.x -= speed;}
	if(event.key=="ArrowRight"||event.key=="D"||event.key=="d")
	{mesh.rotation.x += speed;}
	if(event.key=="W"||event.key=="w")
	{mesh.rotation.y += speed;}
	if(event.key=="S"||event.key=="s")
	{mesh.rotation.y -= speed;}
	}
</script>

</body>
</html>

